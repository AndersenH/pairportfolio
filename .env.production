# Production Environment Configuration Template
# Copy this file to .env.production for production deployment
# Fill in actual production values and secure all secrets

# ================================================
# DATABASE CONFIGURATION
# ================================================
# PostgreSQL connection for production
DATABASE_URL="postgresql://username:password@host:5432/etf_backtesting_prod"

# Connection pool settings for production
DATABASE_CONNECTION_LIMIT="20"
DATABASE_TIMEOUT="30000"

# ================================================
# NEXTAUTH.JS AUTHENTICATION
# ================================================
NEXTAUTH_URL="https://your-domain.com"
NEXTAUTH_SECRET="CHANGE-ME-TO-SECURE-RANDOM-STRING-FOR-PRODUCTION"

# ================================================
# REDIS CACHE CONFIGURATION
# ================================================
REDIS_URL="redis://username:password@redis-host:6379"
REDIS_PASSWORD="CHANGE-ME-TO-SECURE-PASSWORD"
REDIS_DB="0"

# Redis clustering for high availability (optional)
REDIS_CLUSTER_ENABLED="false"
REDIS_CLUSTER_NODES=""

# ================================================
# API KEYS - FINANCIAL DATA PROVIDERS
# ================================================
# Financial Modeling Prep (Primary)
FMP_API_KEY="Ejh2emZcJzogsHafpis8ogaXO7nPZDPI"

# Alpha Vantage (Fallback) - Get production key
ALPHA_VANTAGE_API_KEY="YOUR-PRODUCTION-ALPHA-VANTAGE-KEY"

# Yahoo Finance (Free fallback)
YAHOO_FINANCE_ENABLED="true"

# ================================================
# JWT & SECURITY
# ================================================
JWT_SECRET_KEY="CHANGE-ME-TO-SECURE-RANDOM-STRING-FOR-PRODUCTION"
JWT_EXPIRES_IN="24h"
JWT_REFRESH_EXPIRES_IN="7d"

# ================================================
# RATE LIMITING CONFIGURATION
# ================================================
RATE_LIMIT_ENABLED="true"
RATE_LIMIT_WINDOW_MS="900000"  # 15 minutes
RATE_LIMIT_MAX_REQUESTS="200"  # Higher limit for production
RATE_LIMIT_SKIP_SUCCESSFUL_REQUESTS="true"

# Advanced rate limiting by user/IP
RATE_LIMIT_PER_USER_ENABLED="true"
RATE_LIMIT_PER_USER_MAX="500"  # per window per user
RATE_LIMIT_PER_IP_MAX="100"    # per window per IP

# ================================================
# API CONFIGURATION
# ================================================
API_TIMEOUT_MS="45000"  # Longer timeout for production
API_RETRY_ATTEMPTS="5"  # More retries for production
API_RETRY_DELAY_MS="2000"

# Market data cache settings (longer for production)
MARKET_DATA_CACHE_TTL="7200"   # 2 hours
PRICE_DATA_CACHE_TTL="300"     # 5 minutes for current prices

# ================================================
# LOGGING & MONITORING
# ================================================
LOG_LEVEL="info"
ENABLE_REQUEST_LOGGING="true"
ENABLE_PERFORMANCE_MONITORING="true"

# Structured logging for production
LOG_FORMAT="json"
LOG_OUTPUT="stdout"

# ================================================
# PRODUCTION FLAGS
# ================================================
NODE_ENV="production"
NEXT_PUBLIC_APP_ENV="production"
ENABLE_QUERY_DEVTOOLS="false"
ENABLE_DEBUG_MODE="false"
DISABLE_TELEMETRY="true"

# ================================================
# SECURITY CONFIGURATION
# ================================================
# CORS settings
CORS_ORIGIN="https://your-domain.com"
CORS_CREDENTIALS="true"

# CSP (Content Security Policy)
CSP_ENABLED="true"
CSP_REPORT_ONLY="false"

# HTTPS enforcement
FORCE_HTTPS="true"
HSTS_MAX_AGE="31536000"  # 1 year

# ================================================
# FEATURES FLAGS
# ================================================
ENABLE_ADVANCED_STRATEGIES="true"
ENABLE_BENCHMARK_COMPARISON="true"
ENABLE_PORTFOLIO_SHARING="true"
ENABLE_EXPORT_FUNCTIONALITY="true"

# Beta features (disable in production initially)
ENABLE_BETA_FEATURES="false"
ENABLE_EXPERIMENTAL_STRATEGIES="false"

# ================================================
# BACKTEST ENGINE CONFIGURATION
# ================================================
DEFAULT_INITIAL_CAPITAL="100000"
MAX_BACKTEST_DURATION_YEARS="15"
MIN_BACKTEST_DURATION_DAYS="30"
DEFAULT_REBALANCING_FREQUENCY="monthly"

# Transaction costs (basis points)
TRANSACTION_COST_BPS="5"  # 0.05%
MANAGEMENT_FEE_BPS="20"   # 0.20% annual

# Performance optimization
ENABLE_BACKTEST_CACHING="true"
BACKTEST_CACHE_TTL="86400"  # 24 hours

# ================================================
# UI/UX CONFIGURATION
# ================================================
NEXT_PUBLIC_APP_NAME="ETF Portfolio Backtesting"
NEXT_PUBLIC_APP_VERSION="1.0.0"
NEXT_PUBLIC_COMPANY_NAME="Portfolio Analytics"
NEXT_PUBLIC_SUPPORT_EMAIL="support@portfolioanalytics.com"

# Chart and visualization settings
NEXT_PUBLIC_DEFAULT_CHART_THEME="light"
NEXT_PUBLIC_ENABLE_ANIMATIONS="true"
NEXT_PUBLIC_CHART_UPDATE_INTERVAL="10000"  # 10 seconds for production

# ================================================
# EXTERNAL SERVICES
# ================================================
# Email service (for notifications and alerts)
EMAIL_SERVICE_ENABLED="true"
SMTP_HOST="smtp.your-provider.com"
SMTP_PORT="587"
SMTP_USER="your-smtp-username"
SMTP_PASSWORD="your-smtp-password"
EMAIL_FROM="noreply@your-domain.com"

# Analytics
NEXT_PUBLIC_GA_TRACKING_ID="GA-XXXXXXXXX-X"
ANALYTICS_ENABLED="true"

# Error tracking
SENTRY_DSN="https://your-sentry-dsn@sentry.io/project"
SENTRY_ENABLED="true"
SENTRY_ENVIRONMENT="production"
SENTRY_RELEASE="1.0.0"

# Health monitoring
HEALTH_CHECK_ENABLED="true"
HEALTH_CHECK_ENDPOINT="/api/health"

# ================================================
# PERFORMANCE & SCALING
# ================================================
# CDN configuration
CDN_ENABLED="true"
CDN_URL="https://cdn.your-domain.com"

# Caching strategy
CACHE_STRATEGY="redis"
CACHE_DEFAULT_TTL="3600"

# Background job processing
QUEUE_ENABLED="true"
QUEUE_REDIS_URL="redis://username:password@queue-redis:6379"

# ================================================
# BACKUP & DISASTER RECOVERY
# ================================================
# Database backup
BACKUP_ENABLED="true"
BACKUP_SCHEDULE="0 2 * * *"  # Daily at 2 AM
BACKUP_RETENTION_DAYS="30"

# Data export
ENABLE_DATA_EXPORT="true"
EXPORT_MAX_RECORDS="10000"