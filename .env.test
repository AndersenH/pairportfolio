# Test Environment Configuration
# Used specifically for Playwright E2E testing
# Do not commit sensitive values to version control

# ================================================
# SUPABASE CONFIGURATION (Test Database)
# ================================================
# Use test Supabase project or local test instance
NEXT_PUBLIC_SUPABASE_URL="https://sgeuatzvbxaohjebipwv.supabase.co"
NEXT_PUBLIC_SUPABASE_ANON_KEY="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNnZXVhdHp2Ynhhb2hqZWJpcHd2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MjI4MDU5ODcsImV4cCI6MjAzODM4MTk4N30.4dGmFGq8pFIo2kOZU2LYTn9lGKU4YgBJbRYJjqf5QgA"
SUPABASE_SERVICE_KEY="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNnZXVhdHp2Ynhhb2hqZWJpcHd2Iiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTcyMjgwNTk4NywiZXhwIjoyMDM4MzgxOTg3fQ.Qr_hXCUfUH9K_yTlnXXKNiCZubVIaC5EhN2Ky0VWAx0"

# ================================================
# DATABASE CONFIGURATION
# ================================================
# Use pooled connection for tests
DATABASE_URL="postgresql://postgres.sgeuatzvbxaohjebipwv:oi6vjMoq%23123@aws-0-eu-west-2.pooler.supabase.com:6543/postgres?pgbouncer=true"
DIRECT_URL="postgresql://postgres.sgeuatzvbxaohjebipwv:oi6vjMoq%23123@aws-0-eu-west-2.pooler.supabase.com:5432/postgres"

# ================================================
# NEXTAUTH.JS CONFIGURATION
# ================================================
NEXTAUTH_URL="http://localhost:3000"
NEXTAUTH_SECRET="test-secret-key-for-playwright-e2e-testing-only"

# ================================================
# API KEYS - FINANCIAL DATA
# ================================================
# Use real API key for market data in tests
FMP_API_KEY="Ejh2emZcJzogsHafpis8ogaXO7nPZDPI"
ALPHA_VANTAGE_API_KEY="placeholder-test-key"
YAHOO_FINANCE_ENABLED="true"

# ================================================
# REDIS CONFIGURATION
# ================================================
# Use in-memory cache for tests or test Redis instance
REDIS_URL="redis://localhost:6379/1"  # Use database 1 for tests
REDIS_PASSWORD=""
REDIS_DB="1"

# ================================================
# JWT & SECURITY
# ================================================
JWT_SECRET_KEY="test-jwt-secret-for-e2e-testing-only"
JWT_EXPIRES_IN="1h"
JWT_REFRESH_EXPIRES_IN="24h"

# ================================================
# RATE LIMITING (Relaxed for tests)
# ================================================
RATE_LIMIT_ENABLED="false"  # Disable for faster test execution
RATE_LIMIT_WINDOW_MS="60000"
RATE_LIMIT_MAX_REQUESTS="1000"

# ================================================
# API CONFIGURATION
# ================================================
API_TIMEOUT_MS="15000"  # Shorter timeout for tests
API_RETRY_ATTEMPTS="2"
API_RETRY_DELAY_MS="500"

# Cache settings (shorter TTL for tests)
MARKET_DATA_CACHE_TTL="300"   # 5 minutes
PRICE_DATA_CACHE_TTL="60"     # 1 minute

# ================================================
# LOGGING & MONITORING
# ================================================
LOG_LEVEL="warn"  # Reduce log noise during tests
ENABLE_REQUEST_LOGGING="false"
ENABLE_PERFORMANCE_MONITORING="false"

# ================================================
# ENVIRONMENT FLAGS
# ================================================
NODE_ENV="test"
NEXT_PUBLIC_APP_ENV="test"
ENABLE_QUERY_DEVTOOLS="false"
ENABLE_DEBUG_MODE="false"
DISABLE_TELEMETRY="true"

# ================================================
# FEATURE FLAGS (Enable all for comprehensive testing)
# ================================================
ENABLE_ADVANCED_STRATEGIES="true"
ENABLE_BENCHMARK_COMPARISON="true"
ENABLE_PORTFOLIO_SHARING="true"
ENABLE_EXPORT_FUNCTIONALITY="true"
ENABLE_BETA_FEATURES="true"

# ================================================
# BACKTEST ENGINE CONFIGURATION
# ================================================
DEFAULT_INITIAL_CAPITAL="100000"
MAX_BACKTEST_DURATION_YEARS="10"
MIN_BACKTEST_DURATION_DAYS="30"
DEFAULT_REBALANCING_FREQUENCY="monthly"

# Transaction costs
TRANSACTION_COST_BPS="5"
MANAGEMENT_FEE_BPS="20"

# Performance optimization
ENABLE_BACKTEST_CACHING="true"
BACKTEST_CACHE_TTL="1800"  # 30 minutes

# ================================================
# UI/UX CONFIGURATION
# ================================================
NEXT_PUBLIC_APP_NAME="ETF Portfolio Backtesting - Test"
NEXT_PUBLIC_APP_VERSION="1.0.0-test"
NEXT_PUBLIC_COMPANY_NAME="Portfolio Analytics Test"
NEXT_PUBLIC_SUPPORT_EMAIL="test@portfolioanalytics.com"

# Chart settings
NEXT_PUBLIC_DEFAULT_CHART_THEME="light"
NEXT_PUBLIC_ENABLE_ANIMATIONS="false"  # Disable for faster tests
NEXT_PUBLIC_CHART_UPDATE_INTERVAL="1000"

# ================================================
# EXTERNAL SERVICES (Disabled for tests)
# ================================================
EMAIL_SERVICE_ENABLED="false"
ANALYTICS_ENABLED="false"
SENTRY_ENABLED="false"

# ================================================
# TEST-SPECIFIC CONFIGURATION
# ================================================
# Test data cleanup settings
ENABLE_TEST_DATA_CLEANUP="true"
TEST_DATA_RETENTION_HOURS="1"

# Performance settings for tests
ENABLE_SLOW_TESTS="false"  # Set to true to run performance tests
TEST_TIMEOUT_MS="30000"
TEST_RETRY_ATTEMPTS="2"

# Parallel execution settings
MAX_TEST_WORKERS="4"
TEST_SHARD="1/1"

# Browser settings
HEADLESS="true"
BROWSER_TIMEOUT_MS="60000"

# Test user credentials (should match fixtures/test-data.ts)
TEST_USER_EMAIL="test.user@playwright.test"
TEST_USER_PASSWORD="TestPassword123!"
TEST_ADMIN_EMAIL="admin@playwright.test"
TEST_ADMIN_PASSWORD="AdminPassword123!"