# ETF Portfolio Backtesting Application - Environment Configuration Template
# Copy this file to .env.local for development or .env.production for production
# Fill in actual values and keep secrets secure

# ================================================
# DATABASE CONFIGURATION
# ================================================
# SQLite (Default for development - lightweight, no setup required)
DATABASE_URL="file:./dev.db"

# PostgreSQL (Alternative for production - requires Docker or external server)
# DATABASE_URL="postgresql://user:password@localhost:5432/etf_backtesting"
# DIRECT_URL="postgresql://user:password@localhost:5432/etf_backtesting"

# Optional: Database connection settings (PostgreSQL only)
# DATABASE_CONNECTION_LIMIT="10"
# DATABASE_TIMEOUT="30000"

# ================================================
# NEXTAUTH.JS AUTHENTICATION
# ================================================
NEXTAUTH_URL="http://localhost:3000"
NEXTAUTH_SECRET="your-nextauth-secret-key-here"

# ================================================
# REDIS CACHE CONFIGURATION
# ================================================
REDIS_URL="redis://localhost:6379"
REDIS_PASSWORD=""
REDIS_DB="0"

# Optional: Redis clustering
REDIS_CLUSTER_ENABLED="false"
REDIS_CLUSTER_NODES=""

# ================================================
# API KEYS - FINANCIAL DATA PROVIDERS
# ================================================
# Financial Modeling Prep (Primary) - Free tier: 250 requests/day
FMP_API_KEY="Ejh2emZcJzogsHafpis8ogaXO7nPZDPI"

# Alpha Vantage (Fallback) - Free tier: 25 requests/day
ALPHA_VANTAGE_API_KEY="your-alpha-vantage-api-key"

# Yahoo Finance (Free fallback) - No key required
YAHOO_FINANCE_ENABLED="true"

# ================================================
# JWT & SECURITY
# ================================================
JWT_SECRET_KEY="your-jwt-secret-key"
JWT_EXPIRES_IN="24h"
JWT_REFRESH_EXPIRES_IN="7d"

# ================================================
# RATE LIMITING CONFIGURATION
# ================================================
RATE_LIMIT_ENABLED="true"
RATE_LIMIT_WINDOW_MS="900000"  # 15 minutes
RATE_LIMIT_MAX_REQUESTS="100"  # requests per window
RATE_LIMIT_SKIP_SUCCESSFUL_REQUESTS="false"

# Advanced rate limiting
RATE_LIMIT_PER_USER_ENABLED="true"
RATE_LIMIT_PER_USER_MAX="500"
RATE_LIMIT_PER_IP_MAX="100"

# ================================================
# API CONFIGURATION
# ================================================
API_TIMEOUT_MS="30000"  # 30 seconds
API_RETRY_ATTEMPTS="3"
API_RETRY_DELAY_MS="1000"

# Cache settings
MARKET_DATA_CACHE_TTL="3600"  # 1 hour
PRICE_DATA_CACHE_TTL="300"    # 5 minutes

# ================================================
# LOGGING & MONITORING
# ================================================
LOG_LEVEL="info"  # debug, info, warn, error
ENABLE_REQUEST_LOGGING="true"
ENABLE_PERFORMANCE_MONITORING="true"

# Production logging
LOG_FORMAT="json"  # json or text
LOG_OUTPUT="stdout"  # stdout or file

# ================================================
# ENVIRONMENT FLAGS
# ================================================
NODE_ENV="development"  # development or production
NEXT_PUBLIC_APP_ENV="development"
ENABLE_QUERY_DEVTOOLS="true"
ENABLE_DEBUG_MODE="false"
DISABLE_TELEMETRY="true"

# ================================================
# SECURITY CONFIGURATION
# ================================================
# CORS settings
CORS_ORIGIN="http://localhost:3000"
CORS_CREDENTIALS="true"

# Content Security Policy
CSP_ENABLED="false"  # Enable in production
CSP_REPORT_ONLY="true"

# HTTPS settings (production only)
FORCE_HTTPS="false"
HSTS_MAX_AGE="31536000"

# ================================================
# FEATURE FLAGS
# ================================================
ENABLE_ADVANCED_STRATEGIES="true"
ENABLE_BENCHMARK_COMPARISON="true"
ENABLE_PORTFOLIO_SHARING="true"
ENABLE_EXPORT_FUNCTIONALITY="true"
ENABLE_BETA_FEATURES="false"

# ================================================
# BACKTEST ENGINE CONFIGURATION
# ================================================
DEFAULT_INITIAL_CAPITAL="100000"
MAX_BACKTEST_DURATION_YEARS="10"
MIN_BACKTEST_DURATION_DAYS="30"
DEFAULT_REBALANCING_FREQUENCY="monthly"

# Costs and fees (basis points)
TRANSACTION_COST_BPS="5"   # 0.05%
MANAGEMENT_FEE_BPS="20"    # 0.20% annual

# Performance optimization
ENABLE_BACKTEST_CACHING="true"
BACKTEST_CACHE_TTL="3600"  # 1 hour

# ================================================
# UI/UX CONFIGURATION
# ================================================
NEXT_PUBLIC_APP_NAME="ETF Portfolio Backtesting"
NEXT_PUBLIC_APP_VERSION="1.0.0"
NEXT_PUBLIC_COMPANY_NAME="Portfolio Analytics"
NEXT_PUBLIC_SUPPORT_EMAIL="support@example.com"

# Chart settings
NEXT_PUBLIC_DEFAULT_CHART_THEME="light"
NEXT_PUBLIC_ENABLE_ANIMATIONS="true"
NEXT_PUBLIC_CHART_UPDATE_INTERVAL="5000"  # milliseconds

# ================================================
# EXTERNAL SERVICES (Optional)
# ================================================
# Email service
EMAIL_SERVICE_ENABLED="false"
SMTP_HOST=""
SMTP_PORT=""
SMTP_USER=""
SMTP_PASSWORD=""
EMAIL_FROM=""

# Analytics
NEXT_PUBLIC_GA_TRACKING_ID=""
ANALYTICS_ENABLED="false"

# Error tracking
SENTRY_DSN=""
SENTRY_ENABLED="false"
SENTRY_ENVIRONMENT="development"

# Health monitoring
HEALTH_CHECK_ENABLED="true"
HEALTH_CHECK_ENDPOINT="/api/health"

# ================================================
# PERFORMANCE & SCALING
# ================================================
# CDN configuration
CDN_ENABLED="false"
CDN_URL=""

# Caching strategy
CACHE_STRATEGY="redis"  # redis or memory
CACHE_DEFAULT_TTL="3600"

# Background jobs
QUEUE_ENABLED="false"
QUEUE_REDIS_URL=""

# ================================================
# BACKUP & DATA MANAGEMENT
# ================================================
BACKUP_ENABLED="false"
BACKUP_SCHEDULE="0 2 * * *"  # Daily at 2 AM
BACKUP_RETENTION_DAYS="30"

# Data export limits
ENABLE_DATA_EXPORT="true"
EXPORT_MAX_RECORDS="10000"